<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="Journey v0.10.31">


    <title>Journey ‚Äî Journey v0.10.31</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-8DE7E386.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="Journey.html" class="sidebar-projectName" translate="no">
Journey
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.10.31
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Journey</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Journey</span> 
      <small class="app-vsn" translate="no">(Journey v0.10.31)</small>

    </h1>

  </div>


    <section id="moduledoc">
<p>Journey is an Elixir library for building and executing computation graphs, with built-in persistence, reliability, and scalability.</p><p>Define your application workflows as dependency graphs where user inputs automatically trigger computations in the correct order, with all state persisted to PostgreSQL.</p><p>Executions of the graph survive crashes, redeploys, page reloads, while scaling naturally with your application - no additional infrastructure or cloud service$ required.</p><p>Your application can perform durable, short or long-running executions, with retries, scalability, dependency tracking, scheduling and analytics.</p><p>Journey's primitives are simple: graph, dependencies, functions, persistence, retries, scheduling. Together, they help you build rich, scalable, reliable functionality with simple, well-structured and easy-to-understand code, quickly.</p><h2 id="module-overview" class="section-heading"><a href="#module-overview" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Overview</span></h2><p>To illustrate a few concepts (graph, dependencies ‚Äì including conditional dependencies, computation functions, persistence), here is a simple example.</p><p>This graph adds two numbers when they become available, and conditionally sets the &quot;too large&quot; flag.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Defining a graph, with two input nodes and two downstream computations.</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="8213973295-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;demo graph&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="8213973295-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">input</span><span class="p" data-group-id="8213973295-3">(</span><span class="ss">:x</span><span class="p" data-group-id="8213973295-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">input</span><span class="p" data-group-id="8213973295-4">(</span><span class="ss">:y</span><span class="p" data-group-id="8213973295-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="c1"># :sum is unblocked when :x and :y are provided.</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="8213973295-5">(</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8213973295-6">[</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p" data-group-id="8213973295-6">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="8213973295-7">fn</span><span class="w"> </span><span class="p" data-group-id="8213973295-8">%{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="8213973295-8">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="8213973295-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="8213973295-9">}</span><span class="w"> </span><span class="k" data-group-id="8213973295-7">end</span><span class="p" data-group-id="8213973295-5">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="c1"># :large_value_alert is unblocked when :sum is provided and is greater than 40.</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="8213973295-10">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="8213973295-11">[</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="8213973295-12">fn</span><span class="w"> </span><span class="n">sum_node</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sum_node</span><span class="o">.</span><span class="n">node_value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="k" data-group-id="8213973295-12">end</span><span class="p" data-group-id="8213973295-11">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="k" data-group-id="8213973295-13">fn</span><span class="w"> </span><span class="p" data-group-id="8213973295-14">%{</span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="n">sum</span><span class="p" data-group-id="8213973295-14">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="8213973295-15">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üö®, at </span><span class="si" data-group-id="8213973295-16">#{</span><span class="n">sum</span><span class="si" data-group-id="8213973295-16">}</span><span class="s">&quot;</span><span class="p" data-group-id="8213973295-15">}</span><span class="w"> </span><span class="k" data-group-id="8213973295-13">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="ss">f_on_save</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="8213973295-17">fn</span><span class="w"> </span><span class="c">_execution_id</span><span class="p">,</span><span class="w"> </span><span class="c">_result</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">           </span><span class="c1"># (e.g. send a pubsub notification to the LiveView process to update the UI)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">           </span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="k" data-group-id="8213973295-17">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="8213973295-10">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="8213973295-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="8213973295-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Start an execution of this graph, set input values, read computed values.</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="8213973295-18">(</span><span class="n">graph</span><span class="p" data-group-id="8213973295-18">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8213973295-19">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p" data-group-id="8213973295-19">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8213973295-20">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8213973295-20">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8213973295-21">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8213973295-21">)</span><span class="w">
</span><span class="p" data-group-id="8213973295-22">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p" data-group-id="8213973295-22">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8213973295-23">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p" data-group-id="8213973295-23">)</span><span class="w">
</span><span class="p" data-group-id="8213973295-24">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="8213973295-24">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">eid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># After an outage / redeployment / page reload / long pause, an execution</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># can be reloaded and continue, as if nothing happened.</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="8213973295-25">(</span><span class="n">eid</span><span class="p" data-group-id="8213973295-25">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># An update to :y triggers a re-computation of downstream values.</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8213973295-26">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="mi">37</span><span class="p" data-group-id="8213973295-26">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8213973295-27">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:large_value_alert</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8213973295-27">)</span><span class="w">
</span><span class="p" data-group-id="8213973295-28">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üö®, at 49&quot;</span><span class="p" data-group-id="8213973295-28">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="8213973295-29">(</span><span class="n">execution</span><span class="p" data-group-id="8213973295-29">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="8213973295-30">(</span><span class="p" data-group-id="8213973295-31">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="8213973295-31">]</span><span class="p" data-group-id="8213973295-30">)</span><span class="w">
</span><span class="p" data-group-id="8213973295-32">%{</span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w"> </span><span class="ss">sum</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w"> </span><span class="ss">large_value_alert</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;üö®, at 49&quot;</span><span class="p" data-group-id="8213973295-32">}</span></code></pre><p>The graph can be visualized as a Mermaid graph:</p><pre><code class="makeup elixir" translate="no"><span class="o">&gt;</span><span class="w"> </span><span class="nc">Journey.Tools</span><span class="o">.</span><span class="n">generate_mermaid_graph</span><span class="p" data-group-id="3531577239-1">(</span><span class="n">graph</span><span class="p" data-group-id="3531577239-1">)</span><span class="w">
</span><span class="n">graph</span><span class="w"> </span><span class="nc">TD</span><span class="w">
  </span><span class="p">%</span><span class="p">%</span><span class="w"> </span><span class="nc">Graph</span><span class="w">
  </span><span class="n">subgraph</span><span class="w"> </span><span class="nc">Graph</span><span class="p" data-group-id="3531577239-2">[</span><span class="s">&quot;üß© &#39;demo graph&#39;, version v1&quot;</span><span class="p" data-group-id="3531577239-2">]</span><span class="w">
      </span><span class="n">execution_id</span><span class="p" data-group-id="3531577239-3">[</span><span class="n">execution_id</span><span class="p" data-group-id="3531577239-3">]</span><span class="w">
      </span><span class="n">last_updated_at</span><span class="p" data-group-id="3531577239-4">[</span><span class="n">last_updated_at</span><span class="p" data-group-id="3531577239-4">]</span><span class="w">
      </span><span class="n">x</span><span class="p" data-group-id="3531577239-5">[</span><span class="n">x</span><span class="p" data-group-id="3531577239-5">]</span><span class="w">
      </span><span class="n">y</span><span class="p" data-group-id="3531577239-6">[</span><span class="n">y</span><span class="p" data-group-id="3531577239-6">]</span><span class="w">
      </span><span class="n">sum</span><span class="p" data-group-id="3531577239-7">[</span><span class="s">&quot;sum&lt;br/&gt;(anonymous fn)&quot;</span><span class="p" data-group-id="3531577239-7">]</span><span class="w">
      </span><span class="n">large_value_alert</span><span class="p" data-group-id="3531577239-8">[</span><span class="s">&quot;large_value_alert&lt;br/&gt;(anonymous fn)&quot;</span><span class="p" data-group-id="3531577239-8">]</span><span class="w">

      </span><span class="n">x</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">  </span><span class="n">sum</span><span class="w">
      </span><span class="n">y</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">  </span><span class="n">sum</span><span class="w">
      </span><span class="n">sum</span><span class="w"> </span><span class="o">--</span><span class="o">&gt;</span><span class="w">  </span><span class="n">large_value_alert</span><span class="w">
  </span><span class="k">end</span><span class="w">

  </span><span class="p">%</span><span class="p">%</span><span class="w"> </span><span class="nc">Styling</span><span class="w">
  </span><span class="n">classDef</span><span class="w"> </span><span class="n">inputNode</span><span class="w"> </span><span class="n">fill</span><span class="p">:</span><span class="c1">#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000000</span><span class="w">
  </span><span class="n">classDef</span><span class="w"> </span><span class="n">computeNode</span><span class="w"> </span><span class="n">fill</span><span class="p">:</span><span class="c1">#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000000</span><span class="w">
  </span><span class="n">classDef</span><span class="w"> </span><span class="n">scheduleNode</span><span class="w"> </span><span class="n">fill</span><span class="p">:</span><span class="c1">#fff3e0,stroke:#e65100,stroke-width:2px,color:#000000</span><span class="w">
  </span><span class="n">classDef</span><span class="w"> </span><span class="n">mutateNode</span><span class="w"> </span><span class="n">fill</span><span class="p">:</span><span class="c1">#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000000</span><span class="w">

  </span><span class="p">%</span><span class="p">%</span><span class="w"> </span><span class="nc">Apply</span><span class="w"> </span><span class="n">styles</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">nodes</span><span class="w">
  </span><span class="n">class</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">last_updated_at</span><span class="p">,</span><span class="n">execution_id</span><span class="w"> </span><span class="n">inputNode</span><span class="w">
  </span><span class="n">class</span><span class="w"> </span><span class="n">large_value_alert</span><span class="p">,</span><span class="n">sum</span><span class="w"> </span><span class="n">computeNode</span></code></pre><p>A few things to note about this example:</p><ul><li>Every input value (<code class="inline">:x</code>, <code class="inline">:y</code>), or computation result (<code class="inline">:sum</code>, <code class="inline">:large_value_alert</code>) is persisted as soon as it becomes available,</li><li>The functions attached to <code class="inline">:sum</code> and <code class="inline">:large_value_alert</code><ul><li>are called reliably, with a retry policy,</li><li>will execute on any of the replicas of your application,</li><li>are called proactively ‚Äì¬†when their upstream dependencies are available.</li></ul></li><li>Executions of this flow can take as long as needed (milliseconds? months?), and will live through system restarts, crashes, redeployments, page reloads, etc.</li></ul><h2 id="module-so-what-exactly-does-journey-provide" class="section-heading"><a href="#module-so-what-exactly-does-journey-provide" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">So What Exactly Does Journey Provide?</span></h2><p>Despite the simplicity of use, here are a few things provided by Journey that are worth noting:</p><ul><li><p>Persistence: Executions are persisted, so if the customer leaves the web site, or if the system crashes, their execution can be reloaded and continued from where it left off.</p></li><li><p>Scaling: Since Journey runs as part of your application, it scales with your application. Your graph's computations (<code class="inline">:sum</code>'s function in the example above, or <code class="inline">&amp;compute_zodiac_sign/1</code> and <code class="inline">&amp;compute_horoscope/1</code> in the example above) run on the same nodes where the replicas of your application are running. No additional infrastructure or cloud services are needed.</p></li><li><p>Reliability: Journey uses database-based supervision of computation tasks: The <code class="inline">compute</code> functions are subject to customizable retry policy, so if <code class="inline">:sum</code>'s function above or <code class="inline">&amp;compute_horoscope/1</code> below fails because of a temporary glitch (e.g. the LLM service it uses for drafting horoscopes is currently overloaded), it will be retried.</p></li><li><p>Code Structure: The flow of your application is captured in the Journey graph, and the business logic is captured in the compute functions (<code class="inline">:sum</code>'s function above, or <code class="inline">&amp;compute_zodiac_sign/1</code> and <code class="inline">&amp;compute_horoscope/1</code> below). This clean separation supports you in structuring the functionality of your application in a clear, easy to understand and maintain way.</p></li><li><p>Conditional flow: Journey allows you to define conditions for when a node is to be unblocked. So if your graph includes a &quot;credit_approval_decision&quot; node, the decision can inform which part of the graph is to be executed next (sending a &quot;congrats!&quot; email and starting the credit card issuance process, or sending a &quot;sad trombone&quot; email).</p></li><li><p>Graph Visualization: Journey provides tools for visualizing your application's graph, so you can easily see the flow of data and computations in your application, and to share and discuss it with your team.</p></li><li><p>Scheduling: Your graph can include computations that are scheduled to run at a later time, or on a recurring basis. Daily horoscope emails! A reminder email if they haven't visited the web site in a while! A &quot;happy birthday&quot; email!</p></li><li><p>Removing PII. Journey gives you an easy way to erase sensitive data once it is no longer needed. For example, your Credit Card Application graph can include a step to remove the SSN once the credit score has been computed. For an example, please see</p><pre><code class="makeup elixir" translate="no"><span class="n">mutate</span><span class="p" data-group-id="0832266036-1">(</span><span class="ss">:ssn_redacted</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0832266036-2">[</span><span class="ss">:credit_score</span><span class="p" data-group-id="0832266036-2">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0832266036-3">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0832266036-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;redacted&gt;&quot;</span><span class="p" data-group-id="0832266036-4">}</span><span class="w"> </span><span class="k" data-group-id="0832266036-3">end</span><span class="p">,</span><span class="w"> </span><span class="ss">mutates</span><span class="p">:</span><span class="w"> </span><span class="ss">:ssn</span><span class="p" data-group-id="0832266036-1">)</span></code></pre><p>node in the example credit card application graph, <a href="https://github.com/markmark206/journey/blob/063342e616267375a0fa042317d5984d1198cb5c/lib/journey/examples/credit_card_application.ex#L210">here</a>, which mutates the contents of the :ssn node, replacing its value with &quot;&lt;redacted&gt;&quot;, when :credit_score completes.</p></li><li><p>Tooling and visualization: <a href="Journey.Tools.html"><code class="inline">Journey.Tools</code></a> provides a set of tools for introspecting and managing executions, and for visualizing your application's graph.</p></li></ul><h2 id="module-a-slightly-richer-example-computing-horoscopes" class="section-heading"><a href="#module-a-slightly-richer-example-computing-horoscopes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">A (slightly) richer example: computing horoscopes</span></h2><p>Consider a simple Horoscope application that computes a customer's zodiac sign and horoscope based on their birthday. The application will ask the customer to <code class="inline">input</code> their name and birthday, and it then auto-<code class="inline">compute</code>s their zodiac sign and horoscope.</p><p>This application can be thought of as a graph of nodes, where each node represents a piece of customer-provided data or the result of a computation. Add functions for computing the zodiac sign and horoscope, and capture the sequencing of the computations, and you have a graph that captures the flow of data and computations in your application. When a customer visits your application, you can start the execution of the graph, to accept and store customer-provided inputs (name, birthday), and to compute the zodiac sign and horoscope based on these inputs.</p><p>Journey provides a way to define such graphs, and to run their executions, to serve your customer flows.</p><h2 id="module-step-by-step" class="section-heading"><a href="#module-step-by-step" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Step-by-Step</span></h2><p>Below is a step-by-step example of defining a Journey graph for this Horoscope application.</p><p>(These are code snippets, if you want a complete fragment you can paste into <code class="inline">iex</code> or livebook, scroll down to the &quot;Putting together&quot; code block.)</p><p>This graph captures customer <code class="inline">input</code>s, and defines <code class="inline">compute</code>ations (together with their functions and prerequisites):</p><pre><code class="makeup elixir" translate="no"><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="1044619881-1">(</span><span class="w">
  </span><span class="s">&quot;horoscope workflow - module doctest&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="1044619881-2">[</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="1044619881-3">(</span><span class="ss">:first_name</span><span class="p" data-group-id="1044619881-3">)</span><span class="p">,</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="1044619881-4">(</span><span class="ss">:birth_day</span><span class="p" data-group-id="1044619881-4">)</span><span class="p">,</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="1044619881-5">(</span><span class="ss">:birth_month</span><span class="p" data-group-id="1044619881-5">)</span><span class="p">,</span><span class="w">
    </span><span class="n">compute</span><span class="p" data-group-id="1044619881-6">(</span><span class="w">
      </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="1044619881-7">[</span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p" data-group-id="1044619881-7">]</span><span class="p">,</span><span class="w">
      </span><span class="o">&amp;</span><span class="n">compute_zodiac_sign</span><span class="o">/</span><span class="mi">1</span><span class="w">
    </span><span class="p" data-group-id="1044619881-6">)</span><span class="p">,</span><span class="w">
    </span><span class="n">compute</span><span class="p" data-group-id="1044619881-8">(</span><span class="w">
      </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="1044619881-9">[</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:zodiac_sign</span><span class="p" data-group-id="1044619881-9">]</span><span class="p">,</span><span class="w">
      </span><span class="o">&amp;</span><span class="n">compute_horoscope</span><span class="o">/</span><span class="mi">1</span><span class="w">
    </span><span class="p" data-group-id="1044619881-8">)</span><span class="w">
  </span><span class="p" data-group-id="1044619881-2">]</span><span class="w">
</span><span class="p" data-group-id="1044619881-1">)</span></code></pre><p>When a customer lands on your web page, and starts a new flow, your application will start a new execution of the graph,</p><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="0089835632-1">(</span><span class="n">graph</span><span class="p" data-group-id="0089835632-1">)</span></code></pre><p>and it will populate the execution with the input values (name, birthday) as the customer provides them:</p><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8947784342-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="8947784342-1">)</span><span class="w">
</span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8947784342-2">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="8947784342-2">)</span><span class="w">
</span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8947784342-3">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;May&quot;</span><span class="p" data-group-id="8947784342-3">)</span></code></pre><p>Providing these input values will trigger automatic computations of the customer's zodiac_sign and the horoscope, which can then be read from the execution and rendered on the web page.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="1819546449-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">zodiac_sign</span><span class="p" data-group-id="1819546449-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1819546449-2">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1819546449-2">)</span><span class="w">
</span><span class="p" data-group-id="1819546449-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">horoscope</span><span class="p" data-group-id="1819546449-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1819546449-4">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1819546449-4">)</span></code></pre><p>And that's it!</p><h2 id="module-example" class="section-heading"><a href="#module-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><p>Putting together the components of the horoscope example into a complete, running doctest example:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="c1"># 1. Define a graph capturing the data and the logic of the application -</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1">#    the nodes, their dependencies, and their computations:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="3597756339-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;horoscope workflow - module doctest&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="3597756339-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="3597756339-3">(</span><span class="ss">:first_name</span><span class="p" data-group-id="3597756339-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="3597756339-4">(</span><span class="ss">:birth_day</span><span class="p" data-group-id="3597756339-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="3597756339-5">(</span><span class="ss">:birth_month</span><span class="p" data-group-id="3597756339-5">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="3597756339-6">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="c1"># Depends on user-supplied data:</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="3597756339-7">[</span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p" data-group-id="3597756339-7">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="c1"># Computes itself, once the dependencies are satisfied:</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="3597756339-8">fn</span><span class="w"> </span><span class="p" data-group-id="3597756339-9">%{</span><span class="ss">birth_month</span><span class="p">:</span><span class="w"> </span><span class="c">_birth_month</span><span class="p">,</span><span class="w"> </span><span class="ss">birth_day</span><span class="p">:</span><span class="w"> </span><span class="c">_birth_day</span><span class="p" data-group-id="3597756339-9">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="3597756339-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p" data-group-id="3597756339-10">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="3597756339-8">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="3597756339-6">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="3597756339-11">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="c1"># Computes itself once :first_name and :zodiac_sign are in place:</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="3597756339-12">[</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:zodiac_sign</span><span class="p" data-group-id="3597756339-12">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="3597756339-13">fn</span><span class="w"> </span><span class="p" data-group-id="3597756339-14">%{</span><span class="ss">first_name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">zodiac_sign</span><span class="p">:</span><span class="w"> </span><span class="n">zodiac_sign</span><span class="p" data-group-id="3597756339-14">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="3597756339-15">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üç™s await, </span><span class="si" data-group-id="3597756339-16">#{</span><span class="n">zodiac_sign</span><span class="si" data-group-id="3597756339-16">}</span><span class="s"> </span><span class="si" data-group-id="3597756339-17">#{</span><span class="n">name</span><span class="si" data-group-id="3597756339-17">}</span><span class="s">!&quot;</span><span class="p" data-group-id="3597756339-15">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="3597756339-13">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="3597756339-11">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="3597756339-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="3597756339-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># 2. For every customer visiting your website, start a new execution of the graph:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="3597756339-18">(</span><span class="n">graph</span><span class="p" data-group-id="3597756339-18">)</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># 3. Populate the execution&#39;s nodes with the data as provided by the visitor:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3597756339-19">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p" data-group-id="3597756339-19">)</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># As a side note: if the user leaves and comes back later or if everything crashes,</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># you can always reload the execution using its id:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="3597756339-20">(</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="3597756339-20">)</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Continuing, as if nothing happened:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3597756339-21">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;April&quot;</span><span class="p" data-group-id="3597756339-21">)</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># 4. Now that we have :birth_month and :birth_day, :zodiac_sign will compute itself:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="3597756339-22">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3597756339-22">)</span><span class="w">
</span><span class="p" data-group-id="3597756339-23">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p" data-group-id="3597756339-23">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="3597756339-24">(</span><span class="n">e</span><span class="p" data-group-id="3597756339-24">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="3597756339-25">(</span><span class="p" data-group-id="3597756339-26">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="3597756339-26">]</span><span class="p" data-group-id="3597756339-25">)</span><span class="w">
</span><span class="p" data-group-id="3597756339-27">%{</span><span class="ss">birth_day</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="ss">birth_month</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;April&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">zodiac_sign</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="3597756339-27">}</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># 5. Once we get :first_name, the :horoscope node will compute itself:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3597756339-28">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="3597756339-28">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="3597756339-29">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3597756339-29">)</span><span class="w">
</span><span class="p" data-group-id="3597756339-30">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üç™s await, Taurus Mario!&quot;</span><span class="p" data-group-id="3597756339-30">}</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="3597756339-31">(</span><span class="n">e</span><span class="p" data-group-id="3597756339-31">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="3597756339-32">(</span><span class="p" data-group-id="3597756339-33">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="3597756339-33">]</span><span class="p" data-group-id="3597756339-32">)</span><span class="w">
</span><span class="p" data-group-id="3597756339-34">%{</span><span class="ss">birth_day</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="ss">birth_month</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;April&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">first_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">horoscope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;üç™s await, Taurus Mario!&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">zodiac_sign</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="3597756339-34">}</span><span class="w">
</span><span class="gp unselectable">iex&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># 6. and we can always list executions.</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">this_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="3597756339-35">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;horoscope workflow - module doctest&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by_execution_fields</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3597756339-36">[</span><span class="ss">:inserted_at</span><span class="p" data-group-id="3597756339-36">]</span><span class="p" data-group-id="3597756339-35">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reverse</span><span class="p" data-group-id="3597756339-37">(</span><span class="p" data-group-id="3597756339-37">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">hd</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">this_execution</span><span class="o">.</span><span class="n">id</span><span class="w">
</span><span class="no">true</span></code></pre><p>For a more in-depth example of building a more complex application, see the Credit Card Application example in <a href="Journey.Examples.CreditCardApplication.html"><code class="inline">Journey.Examples.CreditCardApplication</code></a>.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#archive/1" data-no-tooltip="" translate="no">archive(execution_id)</a>

      </div>

        <div class="summary-synopsis"><p>Archives an execution, making it invisible and stopping all background processing.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_value/3" data-no-tooltip="" translate="no">get_value(execution, node_name, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns the value of a node in an execution. Optionally waits for the value to be set.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#history/1" data-no-tooltip="" translate="no">history(execution_id)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the chronological history of all successful computations and set values for an execution.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list_executions/1" data-no-tooltip="" translate="no">list_executions(options \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Queries and retrieves multiple executions from the database with flexible filtering, sorting, and pagination.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#load/2" data-no-tooltip="" translate="no">load(execution_id, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Reloads the current state of an execution from the database to get the latest changes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#new_graph/4" data-no-tooltip="" translate="no">new_graph(name, version, nodes, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Creates a new computation graph with the given name, version, and node definitions.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_value/3" data-no-tooltip="" translate="no">set_value(execution_id, node_name, value)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the value for an input node in an execution and triggers recomputation of dependent nodes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_execution/1" data-no-tooltip="" translate="no">start_execution(graph)</a>

      </div>

        <div class="summary-synopsis"><p>Starts a new execution instance of a computation graph, initializing it to accept input values and perform computations.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unarchive/1" data-no-tooltip="" translate="no">unarchive(execution_id)</a>

      </div>

        <div class="summary-synopsis"><p>Un-archives the supplied execution, if it is archived.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#unset_value/2" data-no-tooltip="" translate="no">unset_value(execution_id, node_name)</a>

      </div>

        <div class="summary-synopsis"><p>Removes the value from an input node in an execution and invalidates all dependent computed nodes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#values/2" data-no-tooltip="" translate="no">values(execution, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns a map of all set node values in an execution, excluding unset nodes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#values_all/2" data-no-tooltip="" translate="no">values_all(execution, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns a map of all nodes in an execution with their current status, including unset nodes.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="archive/1">

  <div class="detail-header">
    <a href="#archive/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">archive(execution_id)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Archives an execution, making it invisible and stopping all background processing.</p><p>Archiving permanently (*) freezes an execution by marking it with an archived timestamp.
This removes it from normal visibility and excludes it from all scheduler processing,
while preserving the data for potential future access.</p><p>*) an execution can be unarchived by calling <a href="#unarchive/1"><code class="inline">unarchive/1</code></a></p><h2 id="archive/1-quick-example" class="section-heading"><a href="#archive/1-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">archived_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="5148552979-1">(</span><span class="n">execution</span><span class="p" data-group-id="5148552979-1">)</span><span class="w">
</span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="5148552979-2">(</span><span class="n">execution</span><span class="p" data-group-id="5148552979-2">)</span><span class="w">  </span><span class="c1"># Returns nil (hidden)</span><span class="w">
</span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="5148552979-3">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="5148552979-3">)</span><span class="w">  </span><span class="c1"># Can still access</span></code></pre><p>Use <a href="#unarchive/1"><code class="inline">unarchive/1</code></a> to reverse archiving and <a href="#list_executions/1"><code class="inline">list_executions/1</code></a> with <code class="inline">:include_archived</code> to find archived executions.</p><h2 id="archive/1-parameters" class="section-heading"><a href="#archive/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct or execution ID string</li></ul><h2 id="archive/1-returns" class="section-heading"><a href="#archive/1-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>Integer timestamp (Unix epoch seconds) when the execution was archived</li></ul><h2 id="archive/1-key-behaviors" class="section-heading"><a href="#archive/1-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Scheduler exclusion</strong> - Archived executions are excluded from all background sweeps and processing</li><li><strong>Hidden by default</strong> - Not returned by <a href="#list_executions/1"><code class="inline">list_executions/1</code></a> or <a href="#load/2"><code class="inline">load/2</code></a> unless explicitly included</li><li><strong>Idempotent</strong> - Archiving an already archived execution returns the existing timestamp</li><li><strong>Reversible</strong> - Use <a href="#unarchive/1"><code class="inline">unarchive/1</code></a> to restore normal visibility and processing</li></ul><h2 id="archive/1-examples" class="section-heading"><a href="#archive/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic archiving workflow:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="7223852269-1">(</span><span class="s">&quot;archive example&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7223852269-2">[</span><span class="n">input</span><span class="p" data-group-id="7223852269-3">(</span><span class="ss">:data</span><span class="p" data-group-id="7223852269-3">)</span><span class="p" data-group-id="7223852269-2">]</span><span class="p" data-group-id="7223852269-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7223852269-4">(</span><span class="n">graph</span><span class="p" data-group-id="7223852269-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">archived_at</span><span class="w">
</span><span class="no">nil</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">archived_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="7223852269-5">(</span><span class="n">execution</span><span class="p" data-group-id="7223852269-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">is_integer</span><span class="p" data-group-id="7223852269-6">(</span><span class="n">archived_at</span><span class="p" data-group-id="7223852269-6">)</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="7223852269-7">(</span><span class="n">execution</span><span class="p" data-group-id="7223852269-7">)</span><span class="w">
</span><span class="no">nil</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="7223852269-8">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7223852269-8">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="no">true</span></code></pre><p>Idempotent behavior:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="5045441659-1">(</span><span class="s">&quot;archive idempotent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5045441659-2">[</span><span class="n">input</span><span class="p" data-group-id="5045441659-3">(</span><span class="ss">:data</span><span class="p" data-group-id="5045441659-3">)</span><span class="p" data-group-id="5045441659-2">]</span><span class="p" data-group-id="5045441659-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="5045441659-4">(</span><span class="n">graph</span><span class="p" data-group-id="5045441659-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">first_archive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="5045441659-5">(</span><span class="n">execution</span><span class="p" data-group-id="5045441659-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">second_archive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="5045441659-6">(</span><span class="n">execution</span><span class="p" data-group-id="5045441659-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">first_archive</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">second_archive</span><span class="w">
</span><span class="no">true</span></code></pre>
  </section>
</section>
<section class="detail" id="get_value/3">

    <span id="get_value/2"></span>

  <div class="detail-header">
    <a href="#get_value/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_value(execution, node_name, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns the value of a node in an execution. Optionally waits for the value to be set.</p><h2 id="get_value/3-quick-examples" class="section-heading"><a href="#get_value/3-quick-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># Basic usage - get a set value</span><span class="w">
</span><span class="p" data-group-id="9788622509-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="9788622509-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="9788622509-2">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="9788622509-2">)</span><span class="w">

</span><span class="c1"># Wait for a computed value to be available</span><span class="w">
</span><span class="p" data-group-id="9788622509-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p" data-group-id="9788622509-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="9788622509-4">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:computed_field</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9788622509-4">)</span><span class="w">

</span><span class="c1"># Wait for a new version of the value</span><span class="w">
</span><span class="p" data-group-id="9788622509-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="9788622509-5">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="9788622509-6">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_new</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9788622509-6">)</span></code></pre><p>Use <a href="#set_value/3"><code class="inline">set_value/3</code></a> to set input values that trigger computations.</p><h2 id="get_value/3-parameters" class="section-heading"><a href="#get_value/3-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct</li><li><code class="inline">node_name</code> - Atom representing the node name (must exist in the graph)</li><li><code class="inline">opts</code> - Keyword list of options (see Options section below)</li></ul><h2 id="get_value/3-returns" class="section-heading"><a href="#get_value/3-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li><code class="inline">{:ok, value}</code> ‚Äì the value is set</li><li><code class="inline">{:error, :not_set}</code> ‚Äì the value is not yet set</li><li><code class="inline">{:error, :no_such_value}</code> ‚Äì the node does not exist</li></ul><h2 id="get_value/3-errors" class="section-heading"><a href="#get_value/3-errors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Errors</span></h2><ul><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if the node name does not exist in the execution's graph</li><li>Raises <a href="https://hexdocs.pm/elixir/ArgumentError.html"><code class="inline">ArgumentError</code></a> if both <code class="inline">:wait_any</code> and <code class="inline">:wait_new</code> options are provided (mutually exclusive)</li></ul><h2 id="get_value/3-options" class="section-heading"><a href="#get_value/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:wait_any</code> ‚Äì¬†whether or not to wait for the value to be set. This option can have the following values:<ul><li><code class="inline">false</code> or <code class="inline">0</code> ‚Äì return immediately without waiting (default)</li><li><code class="inline">true</code> ‚Äì wait until the value is available, or until timeout</li><li>a positive integer ‚Äì wait for the supplied number of milliseconds (default: 30_000)</li><li><code class="inline">:infinity</code> ‚Äì wait indefinitely
This is useful for self-computing nodes, where the value is computed asynchronously.</li></ul></li><li><code class="inline">:wait_new</code> ‚Äì whether to wait for a new revision of the value, compared to the version in the supplied execution. This option can have the following values:<ul><li><code class="inline">false</code> ‚Äì do not wait for a new revision (default)</li><li><code class="inline">true</code> ‚Äì wait for a value with a higher revision than the current one, or the first value if none exists yet, or until timeout</li><li>a positive integer ‚Äì wait for the supplied number of milliseconds for a new revision
This is useful for when want a new version of the value, and are waiting for it to get computed.</li></ul></li></ul><p><strong>Note:</strong> <code class="inline">:wait_any</code> and <code class="inline">:wait_new</code> are mutually exclusive.</p><h2 id="get_value/3-examples" class="section-heading"><a href="#get_value/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey.Examples.Horoscope</span><span class="o">.</span><span class="n">graph</span><span class="p" data-group-id="4278279773-1">(</span><span class="p" data-group-id="4278279773-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="4278279773-2">(</span><span class="p" data-group-id="4278279773-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4278279773-3">(</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p" data-group-id="4278279773-3">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-4">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p" data-group-id="4278279773-4">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p" data-group-id="4278279773-5">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-6">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_month</span><span class="p" data-group-id="4278279773-6">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="4278279773-7">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-8">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:astrological_sign</span><span class="p" data-group-id="4278279773-8">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-9">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="4278279773-9">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4278279773-10">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;April&quot;</span><span class="p" data-group-id="4278279773-10">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:astrological_sign</span><span class="p" data-group-id="4278279773-11">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-12">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="4278279773-12">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-13">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:astrological_sign</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4278279773-13">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p" data-group-id="4278279773-14">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-15">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="mi">2_000</span><span class="p" data-group-id="4278279773-15">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-16">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="4278279773-16">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4278279773-17">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="4278279773-17">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4278279773-18">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4278279773-18">)</span><span class="w">
  </span><span class="p" data-group-id="4278279773-19">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üç™s await, Taurus Mario!&quot;</span><span class="p" data-group-id="4278279773-19">}</span></code></pre>
  </section>
</section>
<section class="detail" id="history/1">

  <div class="detail-header">
    <a href="#history/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">history(execution_id)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns the chronological history of all successful computations and set values for an execution.</p><p>This function provides visibility into the order of operations during execution, showing both
value sets and successful computations in chronological order. Only successful computations
are included; failed computations are filtered out. At the same revision, computations appear
before values.</p><h2 id="history/1-quick-example" class="section-heading"><a href="#history/1-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">history</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">history</span><span class="p" data-group-id="0568423674-1">(</span><span class="n">execution</span><span class="p" data-group-id="0568423674-1">)</span><span class="w">
</span><span class="c1"># [%{node_name: :x, computation_or_value: :value, revision: 1},</span><span class="w">
</span><span class="c1">#  %{node_name: :sum, computation_or_value: :computation, revision: 2}, ...]</span></code></pre><p>Use <a href="#values/2"><code class="inline">values/2</code></a> to see only current values, or <a href="#set_value/3"><code class="inline">set_value/3</code></a> and <a href="#get_value/3"><code class="inline">get_value/3</code></a> for individual operations.</p><h2 id="history/1-parameters" class="section-heading"><a href="#history/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct or execution ID string</li></ul><h2 id="history/1-returns" class="section-heading"><a href="#history/1-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>List of maps sorted by revision, where each map contains:<ul><li><code class="inline">:computation_or_value</code> - either <code class="inline">:computation</code> or <code class="inline">:value</code></li><li><code class="inline">:node_name</code> - the name of the node</li><li><code class="inline">:node_type</code> - the type of the node (<code class="inline">:input</code>, <code class="inline">:compute</code>, <code class="inline">:mutate</code>, etc.)</li><li><code class="inline">:revision</code> - the execution revision when this operation completed</li><li><code class="inline">:value</code> - the actual value (only present for <code class="inline">:value</code> entries)</li></ul></li></ul><h2 id="history/1-examples" class="section-heading"><a href="#history/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic usage showing value sets and computation:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="9654070134-1">(</span><span class="s">&quot;history example&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9654070134-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">input</span><span class="p" data-group-id="9654070134-3">(</span><span class="ss">:x</span><span class="p" data-group-id="9654070134-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">input</span><span class="p" data-group-id="9654070134-4">(</span><span class="ss">:y</span><span class="p" data-group-id="9654070134-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">compute</span><span class="p" data-group-id="9654070134-5">(</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9654070134-6">[</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p" data-group-id="9654070134-6">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9654070134-7">fn</span><span class="w"> </span><span class="p" data-group-id="9654070134-8">%{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="9654070134-8">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="9654070134-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="9654070134-9">}</span><span class="w"> </span><span class="k" data-group-id="9654070134-7">end</span><span class="p" data-group-id="9654070134-5">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="9654070134-2">]</span><span class="p" data-group-id="9654070134-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="9654070134-10">(</span><span class="n">graph</span><span class="p" data-group-id="9654070134-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9654070134-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9654070134-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9654070134-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="9654070134-12">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="9654070134-13">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9654070134-13">)</span><span class="w">
</span><span class="p" data-group-id="9654070134-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="9654070134-14">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">history</span><span class="p" data-group-id="9654070134-15">(</span><span class="n">execution</span><span class="p" data-group-id="9654070134-15">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="9654070134-16">(</span><span class="k" data-group-id="9654070134-17">fn</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="n">entry</span><span class="o">.</span><span class="n">node_name</span><span class="w"> </span><span class="k" data-group-id="9654070134-18">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">:execution_id</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="9654070134-19">%{</span><span class="n">entry</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p" data-group-id="9654070134-19">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">:last_updated_at</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="9654070134-20">%{</span><span class="n">entry</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="9654070134-20">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">entry</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k" data-group-id="9654070134-18">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="9654070134-17">end</span><span class="p" data-group-id="9654070134-16">)</span><span class="w">
</span><span class="p" data-group-id="9654070134-21">[</span><span class="w">
  </span><span class="p" data-group-id="9654070134-22">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="9654070134-22">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9654070134-23">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="9654070134-23">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9654070134-24">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9654070134-24">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9654070134-25">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:computation</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9654070134-25">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9654070134-26">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:input</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9654070134-26">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9654070134-27">%{</span><span class="ss">node_name</span><span class="p">:</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">node_type</span><span class="p">:</span><span class="w"> </span><span class="ss">:compute</span><span class="p">,</span><span class="w"> </span><span class="ss">computation_or_value</span><span class="p">:</span><span class="w"> </span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="ss">revision</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9654070134-27">}</span><span class="w">
</span><span class="p" data-group-id="9654070134-21">]</span></code></pre>
  </section>
</section>
<section class="detail" id="list_executions/1">

    <span id="list_executions/0"></span>

  <div class="detail-header">
    <a href="#list_executions/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">list_executions(options \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Queries and retrieves multiple executions from the database with flexible filtering, sorting, and pagination.</p><p>This function enables searching across all executions in your system, with powerful filtering
capabilities based on graph names, node values, and execution metadata. It's essential for
monitoring workflows, building dashboards, and analyzing execution patterns.</p><h2 id="list_executions/1-quick-example" class="section-heading"><a href="#list_executions/1-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="c1"># List all executions for a specific graph</span><span class="w">
</span><span class="n">executions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="0601208223-1">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_onboarding&quot;</span><span class="p" data-group-id="0601208223-1">)</span><span class="w">

</span><span class="c1"># List executions for a specific graph version</span><span class="w">
</span><span class="n">v1_executions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="0601208223-2">(</span><span class="w">
  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_onboarding&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="w">
</span><span class="p" data-group-id="0601208223-2">)</span><span class="w">

</span><span class="c1"># Find executions where age &gt; 18</span><span class="w">
</span><span class="n">adults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="0601208223-3">(</span><span class="w">
  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user_registration&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0601208223-4">[</span><span class="p" data-group-id="0601208223-5">{</span><span class="ss">:age</span><span class="p">,</span><span class="w"> </span><span class="ss">:gt</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p" data-group-id="0601208223-5">}</span><span class="p" data-group-id="0601208223-4">]</span><span class="w">
</span><span class="p" data-group-id="0601208223-3">)</span></code></pre><p>Use with <a href="#start_execution/1"><code class="inline">start_execution/1</code></a> to create executions and <a href="#load/2"><code class="inline">load/2</code></a> to get individual execution details.</p><h2 id="list_executions/1-parameters" class="section-heading"><a href="#list_executions/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">options</code> - Keyword list of query options (all optional):<ul><li><code class="inline">:graph_name</code> - String name of a specific graph to filter by</li><li><code class="inline">:graph_version</code> - String version of a specific graph to filter by (requires :graph_name)</li><li><code class="inline">:sort_by</code> - List of fields to sort by, including both execution fields and node values (see Sorting section for details)</li><li><code class="inline">:filter_by</code> - List of node value filters using database-level filtering for optimal performance. Each filter is a tuple <code class="inline">{node_name, operator, value}</code> or <code class="inline">{node_name, operator}</code> for nil checks. Operators: <code class="inline">:eq</code>, <code class="inline">:neq</code>, <code class="inline">:lt</code>, <code class="inline">:lte</code>, <code class="inline">:gt</code>, <code class="inline">:gte</code> (comparisons), <code class="inline">:in</code>, <code class="inline">:not_in</code> (membership), <code class="inline">:is_nil</code>, <code class="inline">:is_not_nil</code> (existence). Values can be strings, numbers, booleans, nil or lists (used with <code class="inline">:in</code> and <code class="inline">:not_in</code>). Complex values (maps, tuples, functions) will raise an ArgumentError.</li><li><code class="inline">:limit</code> - Maximum number of results (default: 10,000)</li><li><code class="inline">:offset</code> - Number of results to skip for pagination (default: 0)</li><li><code class="inline">:include_archived</code> - Whether to include archived executions (default: false)</li></ul></li></ul><h2 id="list_executions/1-returns" class="section-heading"><a href="#list_executions/1-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>List of <code class="inline">%Journey.Persistence.Schema.Execution{}</code> structs with preloaded values and computations</li><li>Empty list <code class="inline">[]</code> if no executions match the criteria</li></ul><h2 id="list_executions/1-options" class="section-heading"><a href="#list_executions/1-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><h3 id="list_executions/1-sort_by" class="section-heading"><a href="#list_executions/1-sort_by" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text"><code class="inline">:sort_by</code></span></h3><p>Sort by execution fields or node values. Supports atoms for ascending (<code class="inline">[:updated_at]</code>),
keywords for direction (<code class="inline">[updated_at: :desc]</code>), and mixed formats (<code class="inline">[:graph_name, inserted_at: :desc]</code>).</p><p><strong>Available fields:</strong></p><ul><li>Execution fields: <code class="inline">:inserted_at</code>, <code class="inline">:updated_at</code>, <code class="inline">:revision</code>, <code class="inline">:graph_name</code>, <code class="inline">:graph_version</code></li><li>Node values: Any node name from the graph (e.g., <code class="inline">:age</code>, <code class="inline">:score</code>) using JSONB ordering</li><li>Direction: <code class="inline">:asc</code> (default) or <code class="inline">:desc</code></li></ul><h2 id="list_executions/1-key-behaviors" class="section-heading"><a href="#list_executions/1-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li>Filtering performed at database level for optimal performance</li><li>Only primitive values supported for filtering (complex types raise errors)</li><li>Archived executions excluded by default</li></ul><h2 id="list_executions/1-examples" class="section-heading"><a href="#list_executions/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic listing by graph name:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="3334832035-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;list example basic - </span><span class="si" data-group-id="3334832035-2">#{</span><span class="nc">Journey.Helpers.Random</span><span class="o">.</span><span class="n">random_string</span><span class="p" data-group-id="3334832035-3">(</span><span class="p" data-group-id="3334832035-3">)</span><span class="si" data-group-id="3334832035-2">}</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="3334832035-4">[</span><span class="n">input</span><span class="p" data-group-id="3334832035-5">(</span><span class="ss">:status</span><span class="p" data-group-id="3334832035-5">)</span><span class="p" data-group-id="3334832035-4">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="3334832035-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="3334832035-6">(</span><span class="n">graph</span><span class="p" data-group-id="3334832035-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3334832035-7">(</span><span class="ss">:status</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;active&quot;</span><span class="p" data-group-id="3334832035-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="3334832035-8">(</span><span class="n">graph</span><span class="p" data-group-id="3334832035-8">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3334832035-9">(</span><span class="ss">:status</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pending&quot;</span><span class="p" data-group-id="3334832035-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">executions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="3334832035-10">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="3334832035-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">length</span><span class="p" data-group-id="3334832035-11">(</span><span class="n">executions</span><span class="p" data-group-id="3334832035-11">)</span><span class="w">
</span><span class="mi">2</span></code></pre><p>Filtering by graph version:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;version example yyJE45MjaDdx&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph_v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="2392723784-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">graph_name</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2392723784-2">[</span><span class="n">input</span><span class="p" data-group-id="2392723784-3">(</span><span class="ss">:data</span><span class="p" data-group-id="2392723784-3">)</span><span class="p" data-group-id="2392723784-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2392723784-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph_v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="2392723784-4">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">graph_name</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v2.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2392723784-5">[</span><span class="n">input</span><span class="p" data-group-id="2392723784-6">(</span><span class="ss">:data</span><span class="p" data-group-id="2392723784-6">)</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p" data-group-id="2392723784-7">(</span><span class="ss">:new_field</span><span class="p" data-group-id="2392723784-7">)</span><span class="p" data-group-id="2392723784-5">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2392723784-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="2392723784-8">(</span><span class="n">graph_v1</span><span class="p" data-group-id="2392723784-8">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2392723784-9">(</span><span class="ss">:data</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1 data&quot;</span><span class="p" data-group-id="2392723784-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="2392723784-10">(</span><span class="n">graph_v2</span><span class="p" data-group-id="2392723784-10">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2392723784-11">(</span><span class="ss">:data</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v2 data&quot;</span><span class="p" data-group-id="2392723784-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="2392723784-12">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph_v1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p" data-group-id="2392723784-12">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="2392723784-13">(</span><span class="p" data-group-id="2392723784-13">)</span><span class="w">
</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="2392723784-14">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph_v1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v2.0.0&quot;</span><span class="p" data-group-id="2392723784-14">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="2392723784-15">(</span><span class="p" data-group-id="2392723784-15">)</span><span class="w">
</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="2392723784-16">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph_v1</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="2392723784-16">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="2392723784-17">(</span><span class="p" data-group-id="2392723784-17">)</span><span class="w">
</span><span class="mi">2</span></code></pre><p>Validation that graph_version requires graph_name:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="5399298980-1">(</span><span class="ss">graph_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p" data-group-id="5399298980-1">)</span><span class="w">
</span><span class="gt">** (ArgumentError) Option :graph_version requires :graph_name to be specified</span></code></pre><p>Sorting by execution fields and node values:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="7717652058-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;sort example - </span><span class="si" data-group-id="7717652058-2">#{</span><span class="nc">Journey.Helpers.Random</span><span class="o">.</span><span class="n">random_string</span><span class="p" data-group-id="7717652058-3">(</span><span class="p" data-group-id="7717652058-3">)</span><span class="si" data-group-id="7717652058-2">}</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="7717652058-4">[</span><span class="n">input</span><span class="p" data-group-id="7717652058-5">(</span><span class="ss">:priority</span><span class="p" data-group-id="7717652058-5">)</span><span class="p" data-group-id="7717652058-4">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="7717652058-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7717652058-6">(</span><span class="n">graph</span><span class="p" data-group-id="7717652058-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7717652058-7">(</span><span class="ss">:priority</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;high&quot;</span><span class="p" data-group-id="7717652058-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7717652058-8">(</span><span class="n">graph</span><span class="p" data-group-id="7717652058-8">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7717652058-9">(</span><span class="ss">:priority</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;low&quot;</span><span class="p" data-group-id="7717652058-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7717652058-10">(</span><span class="n">graph</span><span class="p" data-group-id="7717652058-10">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7717652058-11">(</span><span class="ss">:priority</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;medium&quot;</span><span class="p" data-group-id="7717652058-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Sort by priority descending - shows the actual sorted values</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="7717652058-12">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">sort_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7717652058-13">[</span><span class="ss">priority</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="7717652058-13">]</span><span class="p" data-group-id="7717652058-12">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="7717652058-14">(</span><span class="k" data-group-id="7717652058-15">fn</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="7717652058-16">(</span><span class="n">e</span><span class="p" data-group-id="7717652058-16">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="7717652058-17">(</span><span class="ss">:priority</span><span class="p" data-group-id="7717652058-17">)</span><span class="w"> </span><span class="k" data-group-id="7717652058-15">end</span><span class="p" data-group-id="7717652058-14">)</span><span class="w">
</span><span class="p" data-group-id="7717652058-18">[</span><span class="s">&quot;medium&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;low&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;high&quot;</span><span class="p" data-group-id="7717652058-18">]</span></code></pre><p>Filtering with multiple operators:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey.Examples.Horoscope</span><span class="o">.</span><span class="n">graph</span><span class="p" data-group-id="9158965858-1">(</span><span class="p" data-group-id="9158965858-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="9158965858-2">(</span><span class="n">graph</span><span class="p" data-group-id="9158965858-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9158965858-3">(</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="n">day</span><span class="p" data-group-id="9158965858-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9158965858-4">(</span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9158965858-4">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9158965858-5">(</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="9158965858-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Various filtering examples</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9158965858-6">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9158965858-7">[</span><span class="p" data-group-id="9158965858-8">{</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="ss">:eq</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9158965858-8">}</span><span class="p" data-group-id="9158965858-7">]</span><span class="p" data-group-id="9158965858-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="9158965858-9">(</span><span class="p" data-group-id="9158965858-9">)</span><span class="w">
</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9158965858-10">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9158965858-11">[</span><span class="p" data-group-id="9158965858-12">{</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="ss">:neq</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9158965858-12">}</span><span class="p" data-group-id="9158965858-11">]</span><span class="p" data-group-id="9158965858-10">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="9158965858-13">(</span><span class="p" data-group-id="9158965858-13">)</span><span class="w">
</span><span class="mi">19</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9158965858-14">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9158965858-15">[</span><span class="p" data-group-id="9158965858-16">{</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="ss">:lte</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="9158965858-16">}</span><span class="p" data-group-id="9158965858-15">]</span><span class="p" data-group-id="9158965858-14">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="9158965858-17">(</span><span class="p" data-group-id="9158965858-17">)</span><span class="w">
</span><span class="mi">5</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9158965858-18">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9158965858-19">[</span><span class="p" data-group-id="9158965858-20">{</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="ss">:in</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9158965858-21">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="9158965858-21">]</span><span class="p" data-group-id="9158965858-20">}</span><span class="p" data-group-id="9158965858-19">]</span><span class="p" data-group-id="9158965858-18">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="9158965858-22">(</span><span class="p" data-group-id="9158965858-22">)</span><span class="w">
</span><span class="mi">3</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="9158965858-23">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9158965858-24">[</span><span class="p" data-group-id="9158965858-25">{</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:is_not_nil</span><span class="p" data-group-id="9158965858-25">}</span><span class="p" data-group-id="9158965858-24">]</span><span class="p" data-group-id="9158965858-23">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="9158965858-26">(</span><span class="p" data-group-id="9158965858-26">)</span><span class="w">
</span><span class="mi">20</span></code></pre><p>Multiple filters, sorting, and pagination:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey.Examples.Horoscope</span><span class="o">.</span><span class="n">graph</span><span class="p" data-group-id="6588547888-1">(</span><span class="p" data-group-id="6588547888-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">day</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6588547888-2">(</span><span class="n">graph</span><span class="p" data-group-id="6588547888-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6588547888-3">(</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="n">day</span><span class="p" data-group-id="6588547888-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6588547888-4">(</span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6588547888-4">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6588547888-5">(</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="6588547888-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Multiple filters combined</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="6588547888-6">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">filter_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6588547888-7">[</span><span class="p" data-group-id="6588547888-8">{</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="ss">:gt</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="6588547888-8">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6588547888-9">{</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:is_not_nil</span><span class="p" data-group-id="6588547888-9">}</span><span class="p" data-group-id="6588547888-7">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">sort_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6588547888-10">[</span><span class="ss">birth_day</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="6588547888-10">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="6588547888-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="6588547888-11">(</span><span class="p" data-group-id="6588547888-11">)</span><span class="w">
</span><span class="mi">5</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c1"># Pagination</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="6588547888-12">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="6588547888-12">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="6588547888-13">(</span><span class="p" data-group-id="6588547888-13">)</span><span class="w">
</span><span class="mi">3</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="6588547888-14">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="6588547888-14">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="6588547888-15">(</span><span class="p" data-group-id="6588547888-15">)</span><span class="w">
</span><span class="mi">5</span></code></pre><p>Including archived executions:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="7948980963-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;list example - archived - </span><span class="si" data-group-id="7948980963-2">#{</span><span class="nc">Journey.Helpers.Random</span><span class="o">.</span><span class="n">random_string</span><span class="p" data-group-id="7948980963-3">(</span><span class="p" data-group-id="7948980963-3">)</span><span class="si" data-group-id="7948980963-2">}</span><span class="s">&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="7948980963-4">[</span><span class="n">input</span><span class="p" data-group-id="7948980963-5">(</span><span class="ss">:status</span><span class="p" data-group-id="7948980963-5">)</span><span class="p" data-group-id="7948980963-4">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="7948980963-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">e1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7948980963-6">(</span><span class="n">graph</span><span class="p" data-group-id="7948980963-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c">_e2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7948980963-7">(</span><span class="n">graph</span><span class="p" data-group-id="7948980963-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="7948980963-8">(</span><span class="n">e1</span><span class="p" data-group-id="7948980963-8">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="7948980963-9">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p" data-group-id="7948980963-9">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="7948980963-10">(</span><span class="p" data-group-id="7948980963-10">)</span><span class="w">
</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">list_executions</span><span class="p" data-group-id="7948980963-11">(</span><span class="ss">graph_name</span><span class="p">:</span><span class="w"> </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7948980963-11">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="7948980963-12">(</span><span class="p" data-group-id="7948980963-12">)</span><span class="w">
</span><span class="mi">2</span></code></pre>
  </section>
</section>
<section class="detail" id="load/2">

    <span id="load/1"></span>

  <div class="detail-header">
    <a href="#load/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">load(execution_id, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Reloads the current state of an execution from the database to get the latest changes.</p><p>Executions can be modified by their background computations, or scheduled events, or other processes setting their values. This function is used to get the latest state of an execution -- as part of normal operations, or when the system starts up, or when the user whose session is being tracked as an execution comes back to the web site and resumes their flow.</p><h2 id="load/2-quick-example" class="section-heading"><a href="#load/2-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9780811690-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="9780811690-1">)</span><span class="w">
</span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="9780811690-2">(</span><span class="n">execution</span><span class="p" data-group-id="9780811690-2">)</span><span class="w">  </span><span class="c1"># Get updated state with new revision</span><span class="w">
</span><span class="p" data-group-id="9780811690-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">greeting</span><span class="p" data-group-id="9780811690-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="9780811690-4">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9780811690-4">)</span></code></pre><p>Use <a href="#set_value/3"><code class="inline">set_value/3</code></a> and <a href="#get_value/3"><code class="inline">get_value/3</code></a> to modify and read execution values.</p><h2 id="load/2-parameters" class="section-heading"><a href="#load/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct or execution ID string</li><li><code class="inline">opts</code> - Keyword list of options (see Options section below)</li></ul><h2 id="load/2-returns" class="section-heading"><a href="#load/2-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct with current database state, or <code class="inline">nil</code> if not found</li></ul><h2 id="load/2-options" class="section-heading"><a href="#load/2-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:preload</code> - Whether to preload associated nodes and values. Defaults to <code class="inline">true</code>.
Set to <code class="inline">false</code> for better performance when you only need execution metadata.</li><li><code class="inline">:include_archived</code> - Whether to include archived executions. Defaults to <code class="inline">false</code>.
Archived executions are normally hidden but can be loaded with this option.</li></ul><h2 id="load/2-key-behaviors" class="section-heading"><a href="#load/2-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Fresh state</strong> - Always returns the current state from the database, not cached data</li><li><strong>Revision tracking</strong> - Loaded execution will have the latest revision number</li><li><strong>Archived handling</strong> - Archived executions return <code class="inline">nil</code> unless explicitly included</li><li><strong>Performance option</strong> - Use <code class="inline">preload: false</code> to skip loading values/computations for speed</li></ul><h2 id="load/2-examples" class="section-heading"><a href="#load/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic reloading after value changes:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="1275972317-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;load example - basic&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="1275972317-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="1275972317-3">(</span><span class="ss">:name</span><span class="p" data-group-id="1275972317-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="1275972317-4">(</span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1275972317-5">[</span><span class="ss">:name</span><span class="p" data-group-id="1275972317-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1275972317-6">fn</span><span class="w"> </span><span class="p" data-group-id="1275972317-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="1275972317-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="1275972317-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si" data-group-id="1275972317-9">#{</span><span class="n">name</span><span class="si" data-group-id="1275972317-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="1275972317-8">}</span><span class="w"> </span><span class="k" data-group-id="1275972317-6">end</span><span class="p" data-group-id="1275972317-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="1275972317-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="1275972317-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="1275972317-10">(</span><span class="n">graph</span><span class="p" data-group-id="1275972317-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w">
</span><span class="mi">0</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="1275972317-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="1275972317-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="1275972317-12">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, Alice!&quot;</span><span class="p" data-group-id="1275972317-12">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1275972317-13">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1275972317-13">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">reloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="1275972317-14">(</span><span class="n">execution</span><span class="p" data-group-id="1275972317-14">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">reloaded</span><span class="o">.</span><span class="n">revision</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w">
</span><span class="no">true</span></code></pre><p>Loading by execution ID:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="8593865564-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;load example - by id&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="8593865564-2">[</span><span class="n">input</span><span class="p" data-group-id="8593865564-3">(</span><span class="ss">:data</span><span class="p" data-group-id="8593865564-3">)</span><span class="p" data-group-id="8593865564-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="8593865564-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="8593865564-4">(</span><span class="n">graph</span><span class="p" data-group-id="8593865564-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">reloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="8593865564-5">(</span><span class="n">execution_id</span><span class="p" data-group-id="8593865564-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">reloaded</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">execution_id</span><span class="w">
</span><span class="no">true</span></code></pre><p>Performance optimization with preload option:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="6387584513-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;load example - no preload&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="6387584513-2">[</span><span class="n">input</span><span class="p" data-group-id="6387584513-3">(</span><span class="ss">:data</span><span class="p" data-group-id="6387584513-3">)</span><span class="p" data-group-id="6387584513-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="6387584513-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6387584513-4">(</span><span class="n">graph</span><span class="p" data-group-id="6387584513-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fast_load</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="6387584513-5">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">preload</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="6387584513-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fast_load</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="w">
</span><span class="no">true</span></code></pre><p>Handling archived executions:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="5082625075-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;load example - archived&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="5082625075-2">[</span><span class="n">input</span><span class="p" data-group-id="5082625075-3">(</span><span class="ss">:data</span><span class="p" data-group-id="5082625075-3">)</span><span class="p" data-group-id="5082625075-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="5082625075-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="5082625075-4">(</span><span class="n">graph</span><span class="p" data-group-id="5082625075-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="5082625075-5">(</span><span class="n">execution</span><span class="p" data-group-id="5082625075-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="5082625075-6">(</span><span class="n">execution</span><span class="p" data-group-id="5082625075-6">)</span><span class="w">
</span><span class="no">nil</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="5082625075-7">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="5082625075-7">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="no">true</span></code></pre>
  </section>
</section>
<section class="detail" id="new_graph/4">

    <span id="new_graph/3"></span>

  <div class="detail-header">
    <a href="#new_graph/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">new_graph(name, version, nodes, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Creates a new computation graph with the given name, version, and node definitions.</p><p>This is the foundational function for defining Journey graphs. It creates a validated
graph structure that can be used to start executions with <a href="#start_execution/1"><code class="inline">start_execution/1</code></a>. The graph
defines the data flow, dependencies, and computations for your application workflow.</p><h2 id="new_graph/4-quick-example" class="section-heading"><a href="#new_graph/4-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="5776520572-1">(</span><span class="w">
  </span><span class="s">&quot;user onboarding&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5776520572-2">[</span><span class="w">
    </span><span class="n">input</span><span class="p" data-group-id="5776520572-3">(</span><span class="ss">:email</span><span class="p" data-group-id="5776520572-3">)</span><span class="p">,</span><span class="w">
    </span><span class="n">compute</span><span class="p" data-group-id="5776520572-4">(</span><span class="ss">:welcome_message</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5776520572-5">[</span><span class="ss">:email</span><span class="p" data-group-id="5776520572-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5776520572-6">fn</span><span class="w"> </span><span class="p" data-group-id="5776520572-7">%{</span><span class="ss">email</span><span class="p">:</span><span class="w"> </span><span class="n">email</span><span class="p" data-group-id="5776520572-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="5776520572-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome </span><span class="si" data-group-id="5776520572-9">#{</span><span class="n">email</span><span class="si" data-group-id="5776520572-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="5776520572-8">}</span><span class="w">
    </span><span class="k" data-group-id="5776520572-6">end</span><span class="p" data-group-id="5776520572-4">)</span><span class="w">
  </span><span class="p" data-group-id="5776520572-2">]</span><span class="w">
</span><span class="p" data-group-id="5776520572-1">)</span><span class="w">
</span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="5776520572-10">(</span><span class="n">graph</span><span class="p" data-group-id="5776520572-10">)</span></code></pre><p>Use <a href="#start_execution/1"><code class="inline">start_execution/1</code></a> to create executions and <a href="#set_value/3"><code class="inline">set_value/3</code></a> to populate input values.</p><h2 id="new_graph/4-parameters" class="section-heading"><a href="#new_graph/4-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">name</code> - String identifying the graph (e.g., &quot;user registration workflow&quot;)</li><li><code class="inline">version</code> - String version identifier following semantic versioning (e.g., &quot;v1.0.0&quot;)</li><li><code class="inline">nodes</code> - List of node definitions created with <a href="Journey.Node.html"><code class="inline">Journey.Node</code></a> functions (<code class="inline">input/1</code>, <code class="inline">compute/4</code>, etc.)</li><li><code class="inline">opts</code> - Optional keyword list of options:<ul><li><code class="inline">:f_on_save</code> - Graph-wide callback function invoked after any node computation succeeds.
Receives <code class="inline">(execution_id, node_name, result)</code> where result is <code class="inline">{:ok, value}</code> or <code class="inline">{:error, reason}</code>.
This callback is called after any node-specific <code class="inline">f_on_save</code> callbacks.</li></ul></li></ul><h2 id="new_graph/4-returns" class="section-heading"><a href="#new_graph/4-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li><code class="inline">%Journey.Graph{}</code> struct representing the validated and registered computation graph</li></ul><h2 id="new_graph/4-errors" class="section-heading"><a href="#new_graph/4-errors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Errors</span></h2><ul><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if graph validation fails (e.g., circular dependencies, unknown node references)</li><li>Raises <a href="https://hexdocs.pm/elixir/ArgumentError.html"><code class="inline">ArgumentError</code></a> if parameters have invalid types or empty node list</li><li>Raises <code class="inline">KeywordValidator.Error</code> if options are invalid</li></ul><h2 id="new_graph/4-key-behaviors" class="section-heading"><a href="#new_graph/4-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Validation</strong> - Automatically validates graph structure for cycles, dependency correctness</li><li><strong>Registration</strong> - Registers graph in catalog for execution tracking and reloading</li><li><strong>Immutable</strong> - Graph definition is immutable once created; create new versions for changes</li><li><strong>Node types</strong> - Supports input, compute, mutate, schedule_once, and schedule_recurring nodes</li><li><strong><code class="inline">f_on_save</code> Callbacks</strong> - If defined, the graph-wide <code class="inline">f_on_save</code> callback is called after Node-specific <code class="inline">f_on_save</code>s (if defined)</li></ul><h2 id="new_graph/4-examples" class="section-heading"><a href="#new_graph/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic workflow with input and computation:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="6193766814-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;greeting workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="6193766814-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">input</span><span class="p" data-group-id="6193766814-3">(</span><span class="ss">:name</span><span class="p" data-group-id="6193766814-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="6193766814-4">(</span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6193766814-5">[</span><span class="ss">:name</span><span class="p" data-group-id="6193766814-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="6193766814-6">fn</span><span class="w"> </span><span class="p" data-group-id="6193766814-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="6193766814-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="6193766814-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si" data-group-id="6193766814-9">#{</span><span class="n">name</span><span class="si" data-group-id="6193766814-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="6193766814-8">}</span><span class="w"> </span><span class="k" data-group-id="6193766814-6">end</span><span class="p" data-group-id="6193766814-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="6193766814-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="6193766814-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="o">.</span><span class="n">name</span><span class="w">
</span><span class="s">&quot;greeting workflow&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6193766814-10">(</span><span class="n">graph</span><span class="p" data-group-id="6193766814-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6193766814-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="6193766814-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="6193766814-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="6193766814-12">)</span><span class="w">
</span><span class="p" data-group-id="6193766814-13">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, Alice!&quot;</span><span class="p" data-group-id="6193766814-13">}</span></code></pre><p>Graph with a graph-wide <code class="inline">f_on_save</code> callback:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="c">_graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="2518668220-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;notification workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2518668220-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">input</span><span class="p" data-group-id="2518668220-3">(</span><span class="ss">:user_id</span><span class="p" data-group-id="2518668220-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="2518668220-4">(</span><span class="ss">:fetch_user</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2518668220-5">[</span><span class="ss">:user_id</span><span class="p" data-group-id="2518668220-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2518668220-6">fn</span><span class="w"> </span><span class="p" data-group-id="2518668220-7">%{</span><span class="ss">user_id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p" data-group-id="2518668220-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2518668220-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2518668220-9">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User </span><span class="si" data-group-id="2518668220-10">#{</span><span class="n">id</span><span class="si" data-group-id="2518668220-10">}</span><span class="s">&quot;</span><span class="p" data-group-id="2518668220-9">}</span><span class="p" data-group-id="2518668220-8">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="k" data-group-id="2518668220-6">end</span><span class="p" data-group-id="2518668220-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="2518668220-11">(</span><span class="ss">:send_email</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2518668220-12">[</span><span class="ss">:fetch_user</span><span class="p" data-group-id="2518668220-12">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2518668220-13">fn</span><span class="w"> </span><span class="p" data-group-id="2518668220-14">%{</span><span class="ss">fetch_user</span><span class="p">:</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="2518668220-14">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2518668220-15">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Email sent to </span><span class="si" data-group-id="2518668220-16">#{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si" data-group-id="2518668220-16">}</span><span class="s">&quot;</span><span class="p" data-group-id="2518668220-15">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="k" data-group-id="2518668220-13">end</span><span class="p" data-group-id="2518668220-11">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2518668220-2">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">f_on_save</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="2518668220-17">fn</span><span class="w"> </span><span class="c">_execution_id</span><span class="p">,</span><span class="w"> </span><span class="n">node_name</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="c1"># This will be called for both :fetch_user and :send_email computations</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="2518668220-18">(</span><span class="s">&quot;Node </span><span class="si" data-group-id="2518668220-19">#{</span><span class="n">node_name</span><span class="si" data-group-id="2518668220-19">}</span><span class="s"> completed with result: </span><span class="si" data-group-id="2518668220-20">#{</span><span class="n">inspect</span><span class="p" data-group-id="2518668220-21">(</span><span class="n">result</span><span class="p" data-group-id="2518668220-21">)</span><span class="si" data-group-id="2518668220-20">}</span><span class="s">&quot;</span><span class="p" data-group-id="2518668220-18">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">:ok</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k" data-group-id="2518668220-17">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2518668220-1">)</span></code></pre><p>Complex workflow with conditional dependencies:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node.Conditions</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node.UpstreamDependencies</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="2446448602-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;horoscope workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2446448602-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="2446448602-3">(</span><span class="ss">:first_name</span><span class="p" data-group-id="2446448602-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="2446448602-4">(</span><span class="ss">:birth_day</span><span class="p" data-group-id="2446448602-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="2446448602-5">(</span><span class="ss">:birth_month</span><span class="p" data-group-id="2446448602-5">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="2446448602-6">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="2446448602-7">[</span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p" data-group-id="2446448602-7">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="2446448602-8">fn</span><span class="w"> </span><span class="p" data-group-id="2446448602-9">%{</span><span class="ss">birth_month</span><span class="p">:</span><span class="w"> </span><span class="c">_birth_month</span><span class="p">,</span><span class="w"> </span><span class="ss">birth_day</span><span class="p">:</span><span class="w"> </span><span class="c">_birth_day</span><span class="p" data-group-id="2446448602-9">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="2446448602-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p" data-group-id="2446448602-10">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="2446448602-8">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="2446448602-6">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="2446448602-11">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="n">unblocked_when</span><span class="p" data-group-id="2446448602-12">(</span><span class="p" data-group-id="2446448602-13">{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="ss">:and</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="2446448602-14">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">              </span><span class="p" data-group-id="2446448602-15">{</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">provided?</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="2446448602-15">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">              </span><span class="p" data-group-id="2446448602-16">{</span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">provided?</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="2446448602-16">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="2446448602-14">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="2446448602-13">}</span><span class="p" data-group-id="2446448602-12">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="2446448602-17">fn</span><span class="w"> </span><span class="p" data-group-id="2446448602-18">%{</span><span class="ss">first_name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">zodiac_sign</span><span class="p">:</span><span class="w"> </span><span class="n">zodiac_sign</span><span class="p" data-group-id="2446448602-18">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">            </span><span class="p" data-group-id="2446448602-19">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üç™s await, </span><span class="si" data-group-id="2446448602-20">#{</span><span class="n">zodiac_sign</span><span class="si" data-group-id="2446448602-20">}</span><span class="s"> </span><span class="si" data-group-id="2446448602-21">#{</span><span class="n">name</span><span class="si" data-group-id="2446448602-21">}</span><span class="s">!&quot;</span><span class="p" data-group-id="2446448602-19">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="2446448602-17">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="2446448602-11">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2446448602-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="2446448602-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="2446448602-22">(</span><span class="n">graph</span><span class="p" data-group-id="2446448602-22">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2446448602-23">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="2446448602-23">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2446448602-24">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:birth_month</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;May&quot;</span><span class="p" data-group-id="2446448602-24">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="2446448602-25">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:zodiac_sign</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2446448602-25">)</span><span class="w">
</span><span class="p" data-group-id="2446448602-26">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Taurus&quot;</span><span class="p" data-group-id="2446448602-26">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2446448602-27">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p" data-group-id="2446448602-27">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="2446448602-28">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:horoscope</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2446448602-28">)</span><span class="w">
</span><span class="p" data-group-id="2446448602-29">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;üç™s await, Taurus Bob!&quot;</span><span class="p" data-group-id="2446448602-29">}</span></code></pre><p>Multiple node types in a workflow:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="0311259297-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;data processing workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v2.1.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="0311259297-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">input</span><span class="p" data-group-id="0311259297-3">(</span><span class="ss">:raw_data</span><span class="p" data-group-id="0311259297-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="0311259297-4">(</span><span class="ss">:upper_case</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0311259297-5">[</span><span class="ss">:raw_data</span><span class="p" data-group-id="0311259297-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0311259297-6">fn</span><span class="w"> </span><span class="p" data-group-id="0311259297-7">%{</span><span class="ss">raw_data</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="0311259297-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0311259297-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">upcase</span><span class="p" data-group-id="0311259297-9">(</span><span class="n">data</span><span class="p" data-group-id="0311259297-9">)</span><span class="p" data-group-id="0311259297-8">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="k" data-group-id="0311259297-6">end</span><span class="p" data-group-id="0311259297-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="n">compute</span><span class="p" data-group-id="0311259297-10">(</span><span class="ss">:suffix</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0311259297-11">[</span><span class="ss">:upper_case</span><span class="p" data-group-id="0311259297-11">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0311259297-12">fn</span><span class="w"> </span><span class="p" data-group-id="0311259297-13">%{</span><span class="ss">upper_case</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="p" data-group-id="0311259297-13">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0311259297-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="si" data-group-id="0311259297-15">#{</span><span class="n">data</span><span class="si" data-group-id="0311259297-15">}</span><span class="s"> omg yay&quot;</span><span class="p" data-group-id="0311259297-14">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="k" data-group-id="0311259297-12">end</span><span class="p" data-group-id="0311259297-10">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="0311259297-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="0311259297-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="0311259297-16">(</span><span class="n">graph</span><span class="p" data-group-id="0311259297-16">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0311259297-17">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:raw_data</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p" data-group-id="0311259297-17">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0311259297-18">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:upper_case</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0311259297-18">)</span><span class="w">
</span><span class="p" data-group-id="0311259297-19">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;HELLO WORLD&quot;</span><span class="p" data-group-id="0311259297-19">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0311259297-20">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:suffix</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0311259297-20">)</span><span class="w">
</span><span class="p" data-group-id="0311259297-21">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;HELLO WORLD omg yay&quot;</span><span class="p" data-group-id="0311259297-21">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_value/3">

  <div class="detail-header">
    <a href="#set_value/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_value(execution_id, node_name, value)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Sets the value for an input node in an execution and triggers recomputation of dependent nodes.</p><p>When a value is set, Journey automatically recomputes any dependent computed nodes to ensure
consistency across the dependency graph. The operation is idempotent - setting the same value
twice has no effect.</p><h2 id="set_value/3-parameters" class="section-heading"><a href="#set_value/3-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct or execution ID string</li><li><code class="inline">node_name</code> - Atom representing the input node name (must exist in the graph)</li><li><code class="inline">value</code> - The value to set. Supported types: nil, string, number, map, list, boolean. Note that if the map or the list contains atoms, those atoms will be converted to strings.</li></ul><h2 id="set_value/3-returns" class="section-heading"><a href="#set_value/3-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>Updated <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct with incremented revision (if value changed)</li></ul><h2 id="set_value/3-errors" class="section-heading"><a href="#set_value/3-errors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Errors</span></h2><ul><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if the node name does not exist in the execution's graph</li><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if attempting to set a compute node (only input nodes can be set)</li></ul><h2 id="set_value/3-key-behaviors" class="section-heading"><a href="#set_value/3-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Automatic recomputation</strong> - Setting a value triggers recomputation of all dependent nodes</li><li><strong>Idempotent</strong> - Setting the same value twice has no effect (no revision increment)</li><li><strong>Input nodes only</strong> - Only input nodes can be set; compute nodes are read-only</li></ul><h2 id="set_value/3-quick-example" class="section-heading"><a href="#set_value/3-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8183195884-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="8183195884-1">)</span><span class="w">
</span><span class="p" data-group-id="8183195884-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">greeting</span><span class="p" data-group-id="8183195884-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8183195884-3">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8183195884-3">)</span></code></pre><p>Use <a href="#get_value/3"><code class="inline">get_value/3</code></a> to retrieve the set value and <a href="#unset_value/2"><code class="inline">unset_value/2</code></a> to remove values.</p><h2 id="set_value/3-examples" class="section-heading"><a href="#set_value/3-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic setting with cascading recomputation:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="0609153556-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;set workflow - cascading example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0609153556-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="0609153556-3">(</span><span class="ss">:name</span><span class="p" data-group-id="0609153556-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="0609153556-4">(</span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0609153556-5">[</span><span class="ss">:name</span><span class="p" data-group-id="0609153556-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="0609153556-6">fn</span><span class="w"> </span><span class="p" data-group-id="0609153556-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="0609153556-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0609153556-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si" data-group-id="0609153556-9">#{</span><span class="n">name</span><span class="si" data-group-id="0609153556-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="0609153556-8">}</span><span class="w"> </span><span class="k" data-group-id="0609153556-6">end</span><span class="p" data-group-id="0609153556-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0609153556-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="0609153556-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="0609153556-10">(</span><span class="p" data-group-id="0609153556-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0609153556-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="0609153556-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0609153556-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0609153556-12">)</span><span class="w">
</span><span class="p" data-group-id="0609153556-13">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, Mario!&quot;</span><span class="p" data-group-id="0609153556-13">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0609153556-14">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Luigi&quot;</span><span class="p" data-group-id="0609153556-14">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0609153556-15">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_new</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0609153556-15">)</span><span class="w">
</span><span class="p" data-group-id="0609153556-16">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, Luigi!&quot;</span><span class="p" data-group-id="0609153556-16">}</span></code></pre><p>Idempotent behavior - same value doesn't change revision:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="9531372098-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;set workflow - idempotent example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="9531372098-2">[</span><span class="n">input</span><span class="p" data-group-id="9531372098-3">(</span><span class="ss">:name</span><span class="p" data-group-id="9531372098-3">)</span><span class="p" data-group-id="9531372098-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="9531372098-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="9531372098-4">(</span><span class="p" data-group-id="9531372098-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9531372098-5">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="9531372098-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">first_revision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="9531372098-6">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="9531372098-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">first_revision</span><span class="w">
</span><span class="no">true</span></code></pre><p>Different value types:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="0049216993-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;set workflow - value types example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0049216993-2">[</span><span class="n">input</span><span class="p" data-group-id="0049216993-3">(</span><span class="ss">:number</span><span class="p" data-group-id="0049216993-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p" data-group-id="0049216993-4">(</span><span class="ss">:flag</span><span class="p" data-group-id="0049216993-4">)</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p" data-group-id="0049216993-5">(</span><span class="ss">:data</span><span class="p" data-group-id="0049216993-5">)</span><span class="p" data-group-id="0049216993-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="0049216993-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="0049216993-6">(</span><span class="p" data-group-id="0049216993-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0049216993-7">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:number</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p" data-group-id="0049216993-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0049216993-8">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:flag</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0049216993-8">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="0049216993-9">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:data</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0049216993-10">%{</span><span class="ss">key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="0049216993-10">}</span><span class="p" data-group-id="0049216993-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0049216993-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:number</span><span class="p" data-group-id="0049216993-11">)</span><span class="w">
</span><span class="p" data-group-id="0049216993-12">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p" data-group-id="0049216993-12">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="0049216993-13">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:flag</span><span class="p" data-group-id="0049216993-13">)</span><span class="w">
</span><span class="p" data-group-id="0049216993-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0049216993-14">}</span></code></pre><p>Using an execution ID:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="6571319562-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;set workflow - execution_id example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="6571319562-2">[</span><span class="n">input</span><span class="p" data-group-id="6571319562-3">(</span><span class="ss">:name</span><span class="p" data-group-id="6571319562-3">)</span><span class="p" data-group-id="6571319562-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="6571319562-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6571319562-4">(</span><span class="p" data-group-id="6571319562-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">updated_execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6571319562-5">(</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Luigi&quot;</span><span class="p" data-group-id="6571319562-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="6571319562-6">(</span><span class="n">updated_execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="6571319562-6">)</span><span class="w">
</span><span class="p" data-group-id="6571319562-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Luigi&quot;</span><span class="p" data-group-id="6571319562-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="start_execution/1">

  <div class="detail-header">
    <a href="#start_execution/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_execution(graph)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Starts a new execution instance of a computation graph, initializing it to accept input values and perform computations.</p><p>Creates a persistent execution in the database with a unique ID and begins background processing
for any schedulable nodes. The execution starts with revision 0 and no values set.</p><h2 id="start_execution/1-quick-example" class="section-heading"><a href="#start_execution/1-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6204683931-1">(</span><span class="n">graph</span><span class="p" data-group-id="6204683931-1">)</span><span class="w">
</span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="6204683931-2">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="6204683931-2">)</span><span class="w">
</span><span class="p" data-group-id="6204683931-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">greeting</span><span class="p" data-group-id="6204683931-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="6204683931-4">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="6204683931-4">)</span></code></pre><p>Use <a href="#set_value/3"><code class="inline">set_value/3</code></a> to provide input values and <a href="#get_value/3"><code class="inline">get_value/3</code></a> to retrieve computed results.</p><h2 id="start_execution/1-parameters" class="section-heading"><a href="#start_execution/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">graph</code> - A validated <code class="inline">%Journey.Graph{}</code> struct created with <a href="#new_graph/3"><code class="inline">new_graph/3</code></a>. The graph must
have passed validation during creation and be registered in the graph catalog.</li></ul><h2 id="start_execution/1-returns" class="section-heading"><a href="#start_execution/1-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>A new <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct with:<ul><li><code class="inline">:id</code> - Unique execution identifier (UUID string)</li><li><code class="inline">:graph_name</code> and <code class="inline">:graph_version</code> - From the source graph</li><li><code class="inline">:revision</code> - Always starts at 0, increments with each state change</li><li><code class="inline">:archived_at</code> - Initially nil (not archived)
and other fields.</li></ul></li></ul><h2 id="start_execution/1-key-behaviors" class="section-heading"><a href="#start_execution/1-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Database persistence</strong> - Execution state is immediately saved to PostgreSQL</li><li><strong>Unique execution</strong> - Each call creates a completely independent execution instance</li><li><strong>Background processing</strong> - Scheduler automatically begins monitoring for schedulable nodes</li><li><strong>Ready for inputs</strong> - Can immediately accept input values via <a href="#set_value/3"><code class="inline">set_value/3</code></a></li></ul><h2 id="start_execution/1-examples" class="section-heading"><a href="#start_execution/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic execution creation:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="0584319629-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;greeting workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0584319629-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="0584319629-3">(</span><span class="ss">:name</span><span class="p" data-group-id="0584319629-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="0584319629-4">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:greeting</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="0584319629-5">[</span><span class="ss">:name</span><span class="p" data-group-id="0584319629-5">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="0584319629-6">fn</span><span class="w"> </span><span class="p" data-group-id="0584319629-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="0584319629-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0584319629-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si" data-group-id="0584319629-9">#{</span><span class="n">name</span><span class="si" data-group-id="0584319629-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="0584319629-8">}</span><span class="w"> </span><span class="k" data-group-id="0584319629-6">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="0584319629-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="0584319629-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="0584319629-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="0584319629-10">(</span><span class="n">graph</span><span class="p" data-group-id="0584319629-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">graph_name</span><span class="w">
</span><span class="s">&quot;greeting workflow&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">graph_version</span><span class="w">
</span><span class="s">&quot;v1.0.0&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w">
</span><span class="mi">0</span></code></pre><p>Execution properties and immediate workflow:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="4603276136-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;calculation workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="4603276136-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="4603276136-3">(</span><span class="ss">:x</span><span class="p" data-group-id="4603276136-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="4603276136-4">(</span><span class="ss">:y</span><span class="p" data-group-id="4603276136-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="4603276136-5">(</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4603276136-6">[</span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p" data-group-id="4603276136-6">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4603276136-7">fn</span><span class="w"> </span><span class="p" data-group-id="4603276136-8">%{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="4603276136-8">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="4603276136-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p" data-group-id="4603276136-9">}</span><span class="w"> </span><span class="k" data-group-id="4603276136-7">end</span><span class="p" data-group-id="4603276136-5">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="4603276136-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="4603276136-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="4603276136-10">(</span><span class="n">graph</span><span class="p" data-group-id="4603276136-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">is_binary</span><span class="p" data-group-id="4603276136-11">(</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="4603276136-11">)</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="o">.</span><span class="n">archived_at</span><span class="w">
</span><span class="no">nil</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">user_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="4603276136-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">reload</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4603276136-12">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">drop</span><span class="p" data-group-id="4603276136-13">(</span><span class="p" data-group-id="4603276136-14">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="4603276136-14">]</span><span class="p" data-group-id="4603276136-13">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">user_values</span><span class="w">
</span><span class="p" data-group-id="4603276136-15">%{</span><span class="p" data-group-id="4603276136-15">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4603276136-16">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:x</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4603276136-16">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4603276136-17">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:y</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="4603276136-17">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="4603276136-18">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4603276136-18">)</span><span class="w">
</span><span class="p" data-group-id="4603276136-19">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p" data-group-id="4603276136-19">}</span></code></pre><p>Multiple independent executions:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="7728418351-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;counter workflow&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="7728418351-2">[</span><span class="n">input</span><span class="p" data-group-id="7728418351-3">(</span><span class="ss">:count</span><span class="p" data-group-id="7728418351-3">)</span><span class="p" data-group-id="7728418351-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="7728418351-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7728418351-4">(</span><span class="n">graph</span><span class="p" data-group-id="7728418351-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="7728418351-5">(</span><span class="n">graph</span><span class="p" data-group-id="7728418351-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution1</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">execution2</span><span class="o">.</span><span class="n">id</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7728418351-6">(</span><span class="n">execution1</span><span class="p">,</span><span class="w"> </span><span class="ss">:count</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="7728418351-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="7728418351-7">(</span><span class="n">execution2</span><span class="p">,</span><span class="w"> </span><span class="ss">:count</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="7728418351-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="7728418351-8">(</span><span class="n">execution1</span><span class="p">,</span><span class="w"> </span><span class="ss">:count</span><span class="p" data-group-id="7728418351-8">)</span><span class="w">
</span><span class="p" data-group-id="7728418351-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="7728418351-9">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="7728418351-10">(</span><span class="n">execution2</span><span class="p">,</span><span class="w"> </span><span class="ss">:count</span><span class="p" data-group-id="7728418351-10">)</span><span class="w">
</span><span class="p" data-group-id="7728418351-11">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="7728418351-11">}</span></code></pre>
  </section>
</section>
<section class="detail" id="unarchive/1">

  <div class="detail-header">
    <a href="#unarchive/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">unarchive(execution_id)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Un-archives the supplied execution, if it is archived.</p><h2 id="unarchive/1-parameters" class="section-heading"><a href="#unarchive/1-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters:</span></h2><ul><li><code class="inline">execution</code> or <code class="inline">execution_id</code>: The execution to un-archive, or the ID of the execution to un-archive.</li></ul><p>Returns</p><ul><li>:ok</li></ul><h2 id="unarchive/1-examples" class="section-heading"><a href="#unarchive/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey.Examples.Horoscope</span><span class="o">.</span><span class="n">graph</span><span class="p" data-group-id="3011089071-1">(</span><span class="p" data-group-id="3011089071-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="3011089071-2">(</span><span class="p" data-group-id="3011089071-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="gp unselectable">...&gt; </span><span class="w">   </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="3011089071-3">(</span><span class="ss">:birth_day</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p" data-group-id="3011089071-3">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="c">_archived_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">archive</span><span class="p" data-group-id="3011089071-4">(</span><span class="n">execution</span><span class="p" data-group-id="3011089071-4">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="c1"># The execution is now archived, and it is no longer visible.</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="no">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="3011089071-5">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3011089071-5">)</span><span class="w">
  </span><span class="no">true</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unarchive</span><span class="p" data-group-id="3011089071-6">(</span><span class="n">execution</span><span class="p" data-group-id="3011089071-6">)</span><span class="w">
  </span><span class="ss">:ok</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="c1"># The execution is now un-archived, and it can now be loaded.</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="no">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">load</span><span class="p" data-group-id="3011089071-7">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">include_archived</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3011089071-7">)</span><span class="w">
  </span><span class="no">false</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="c1"># Un-archiving an un-archived execution has no effect.</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unarchive</span><span class="p" data-group-id="3011089071-8">(</span><span class="n">execution</span><span class="p" data-group-id="3011089071-8">)</span><span class="w">
  </span><span class="ss">:ok</span></code></pre>
  </section>
</section>
<section class="detail" id="unset_value/2">

  <div class="detail-header">
    <a href="#unset_value/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">unset_value(execution_id, node_name)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Removes the value from an input node in an execution and invalidates all dependent computed nodes.</p><p>When a value is unset, Journey automatically invalidates (unsets) all computed nodes that depend
on the unset input, creating a cascading effect through the dependency graph. This ensures data
consistency - no computed values remain that were based on the now-removed input.</p><h2 id="unset_value/2-quick-example" class="section-heading"><a href="#unset_value/2-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unset_value</span><span class="p" data-group-id="1479103224-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="1479103224-1">)</span><span class="w">
</span><span class="p" data-group-id="1479103224-2">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="1479103224-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1479103224-3">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="1479103224-3">)</span></code></pre><p>Use <a href="#set_value/3"><code class="inline">set_value/3</code></a> to set values and <a href="#get_value/3"><code class="inline">get_value/3</code></a> to check if values are set.</p><h2 id="unset_value/2-parameters" class="section-heading"><a href="#unset_value/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct or execution ID string</li><li><code class="inline">node_name</code> - Atom representing the input node name (must exist in the graph)</li></ul><h2 id="unset_value/2-returns" class="section-heading"><a href="#unset_value/2-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>Updated <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct with incremented revision (if value was set)</li></ul><h2 id="unset_value/2-errors" class="section-heading"><a href="#unset_value/2-errors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Errors</span></h2><ul><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if the node name does not exist in the execution's graph</li><li>Raises <a href="https://hexdocs.pm/elixir/RuntimeError.html"><code class="inline">RuntimeError</code></a> if attempting to unset a compute node (only input nodes can be unset)</li></ul><h2 id="unset_value/2-key-behaviors" class="section-heading"><a href="#unset_value/2-key-behaviors" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Behaviors</span></h2><ul><li><strong>Cascading invalidation</strong> - Dependent computed nodes are automatically unset</li><li><strong>Idempotent</strong> - Multiple unsets of the same value have no additional effect</li><li><strong>Input nodes only</strong> - Only input nodes can be unset; compute nodes cannot be unset</li></ul><h2 id="unset_value/2-examples" class="section-heading"><a href="#unset_value/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic unsetting with cascading invalidation:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="8972475217-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;unset workflow - basic example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="8972475217-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="8972475217-3">(</span><span class="ss">:name</span><span class="p" data-group-id="8972475217-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="8972475217-4">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="ss">:greeting</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="p" data-group-id="8972475217-5">[</span><span class="ss">:name</span><span class="p" data-group-id="8972475217-5">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">          </span><span class="k" data-group-id="8972475217-6">fn</span><span class="w"> </span><span class="p" data-group-id="8972475217-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="8972475217-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="8972475217-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, </span><span class="si" data-group-id="8972475217-9">#{</span><span class="n">name</span><span class="si" data-group-id="8972475217-9">}</span><span class="s">!&quot;</span><span class="p" data-group-id="8972475217-8">}</span><span class="w"> </span><span class="k" data-group-id="8972475217-6">end</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="p" data-group-id="8972475217-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="8972475217-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="8972475217-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="8972475217-10">(</span><span class="p" data-group-id="8972475217-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8972475217-11">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mario&quot;</span><span class="p" data-group-id="8972475217-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8972475217-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8972475217-12">)</span><span class="w">
</span><span class="p" data-group-id="8972475217-13">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, Mario!&quot;</span><span class="p" data-group-id="8972475217-13">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution_after_unset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unset_value</span><span class="p" data-group-id="8972475217-14">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="8972475217-14">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8972475217-15">(</span><span class="n">execution_after_unset</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="8972475217-15">)</span><span class="w">
</span><span class="p" data-group-id="8972475217-16">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="8972475217-16">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="8972475217-17">(</span><span class="n">execution_after_unset</span><span class="p">,</span><span class="w"> </span><span class="ss">:greeting</span><span class="p" data-group-id="8972475217-17">)</span><span class="w">
</span><span class="p" data-group-id="8972475217-18">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="8972475217-18">}</span></code></pre><p>Multi-level cascading (A ‚Üí B ‚Üí C chain):</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="1795109177-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;unset workflow - cascade example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="1795109177-2">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">input</span><span class="p" data-group-id="1795109177-3">(</span><span class="ss">:a</span><span class="p" data-group-id="1795109177-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="1795109177-4">(</span><span class="ss">:b</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1795109177-5">[</span><span class="ss">:a</span><span class="p" data-group-id="1795109177-5">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1795109177-6">fn</span><span class="w"> </span><span class="p" data-group-id="1795109177-7">%{</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p" data-group-id="1795109177-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="1795109177-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B:</span><span class="si" data-group-id="1795109177-9">#{</span><span class="n">a</span><span class="si" data-group-id="1795109177-9">}</span><span class="s">&quot;</span><span class="p" data-group-id="1795109177-8">}</span><span class="w"> </span><span class="k" data-group-id="1795109177-6">end</span><span class="p" data-group-id="1795109177-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">        </span><span class="n">compute</span><span class="p" data-group-id="1795109177-10">(</span><span class="ss">:c</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1795109177-11">[</span><span class="ss">:b</span><span class="p" data-group-id="1795109177-11">]</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1795109177-12">fn</span><span class="w"> </span><span class="p" data-group-id="1795109177-13">%{</span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="1795109177-13">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="1795109177-14">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C:</span><span class="si" data-group-id="1795109177-15">#{</span><span class="n">b</span><span class="si" data-group-id="1795109177-15">}</span><span class="s">&quot;</span><span class="p" data-group-id="1795109177-14">}</span><span class="w"> </span><span class="k" data-group-id="1795109177-12">end</span><span class="p" data-group-id="1795109177-10">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="1795109177-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="1795109177-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="1795109177-16">(</span><span class="p" data-group-id="1795109177-16">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="1795109177-17">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:a</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p" data-group-id="1795109177-17">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1795109177-18">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:b</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1795109177-18">)</span><span class="w">
</span><span class="p" data-group-id="1795109177-19">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B:value&quot;</span><span class="p" data-group-id="1795109177-19">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1795109177-20">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:c</span><span class="p">,</span><span class="w"> </span><span class="ss">wait_any</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1795109177-20">)</span><span class="w">
</span><span class="p" data-group-id="1795109177-21">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;C:B:value&quot;</span><span class="p" data-group-id="1795109177-21">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution_after_unset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unset_value</span><span class="p" data-group-id="1795109177-22">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:a</span><span class="p" data-group-id="1795109177-22">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1795109177-23">(</span><span class="n">execution_after_unset</span><span class="p">,</span><span class="w"> </span><span class="ss">:a</span><span class="p" data-group-id="1795109177-23">)</span><span class="w">
</span><span class="p" data-group-id="1795109177-24">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="1795109177-24">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1795109177-25">(</span><span class="n">execution_after_unset</span><span class="p">,</span><span class="w"> </span><span class="ss">:b</span><span class="p" data-group-id="1795109177-25">)</span><span class="w">
</span><span class="p" data-group-id="1795109177-26">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="1795109177-26">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">get_value</span><span class="p" data-group-id="1795109177-27">(</span><span class="n">execution_after_unset</span><span class="p">,</span><span class="w"> </span><span class="ss">:c</span><span class="p" data-group-id="1795109177-27">)</span><span class="w">
</span><span class="p" data-group-id="1795109177-28">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:not_set</span><span class="p" data-group-id="1795109177-28">}</span></code></pre><p>Idempotent behavior:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="6337030316-1">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;unset workflow - idempotent example&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="6337030316-2">[</span><span class="n">input</span><span class="p" data-group-id="6337030316-3">(</span><span class="ss">:name</span><span class="p" data-group-id="6337030316-3">)</span><span class="p" data-group-id="6337030316-2">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="6337030316-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="6337030316-4">(</span><span class="p" data-group-id="6337030316-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">original_revision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">execution</span><span class="o">.</span><span class="n">revision</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution_after_unset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">unset_value</span><span class="p" data-group-id="6337030316-5">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="6337030316-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution_after_unset</span><span class="o">.</span><span class="n">revision</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">original_revision</span><span class="w">
</span><span class="no">true</span></code></pre>
  </section>
</section>
<section class="detail" id="values/2">

    <span id="values/1"></span>

  <div class="detail-header">
    <a href="#values/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">values(execution, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns a map of all set node values in an execution, excluding unset nodes.</p><p>This function filters the execution to only include nodes that have been populated with data.
Unset nodes are excluded from the result. Always includes <code class="inline">:execution_id</code> and <code class="inline">:last_updated_at</code> metadata.</p><h2 id="values/2-quick-example" class="section-heading"><a href="#values/2-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="4576564793-1">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="4576564793-1">)</span><span class="w">
</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="4576564793-2">(</span><span class="n">execution</span><span class="p" data-group-id="4576564793-2">)</span><span class="w">
</span><span class="c1"># %{name: &quot;Alice&quot;, execution_id: &quot;EXEC...&quot;, last_updated_at: 1234567890}</span></code></pre><p>Use <a href="#values_all/1"><code class="inline">values_all/1</code></a> to see all nodes including unset ones, or <a href="#get_value/3"><code class="inline">get_value/3</code></a> for individual values.</p><h2 id="values/2-parameters" class="section-heading"><a href="#values/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct</li><li><code class="inline">opts</code> - Keyword list of options (<code class="inline">:reload</code> - see <a href="#values_all/1"><code class="inline">values_all/1</code></a> for details)</li></ul><h2 id="values/2-returns" class="section-heading"><a href="#values/2-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>Map with node names as keys and their current values as values</li><li>Only includes nodes that have been set (excludes <code class="inline">:not_set</code> nodes)</li></ul><h2 id="values/2-examples" class="section-heading"><a href="#values/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic usage:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="2086335612-1">(</span><span class="s">&quot;example&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2086335612-2">[</span><span class="n">input</span><span class="p" data-group-id="2086335612-3">(</span><span class="ss">:name</span><span class="p" data-group-id="2086335612-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p" data-group-id="2086335612-4">(</span><span class="ss">:age</span><span class="p" data-group-id="2086335612-4">)</span><span class="p" data-group-id="2086335612-2">]</span><span class="p" data-group-id="2086335612-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="2086335612-5">(</span><span class="n">graph</span><span class="p" data-group-id="2086335612-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="2086335612-6">(</span><span class="n">execution</span><span class="p" data-group-id="2086335612-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="2086335612-7">(</span><span class="p" data-group-id="2086335612-8">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="2086335612-8">]</span><span class="p" data-group-id="2086335612-7">)</span><span class="w">
</span><span class="p" data-group-id="2086335612-9">%{</span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="2086335612-9">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="2086335612-10">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="2086335612-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values</span><span class="p" data-group-id="2086335612-11">(</span><span class="n">execution</span><span class="p" data-group-id="2086335612-11">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="2086335612-12">(</span><span class="p" data-group-id="2086335612-13">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="2086335612-13">]</span><span class="p" data-group-id="2086335612-12">)</span><span class="w">
</span><span class="p" data-group-id="2086335612-14">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="2086335612-14">}</span></code></pre>
  </section>
</section>
<section class="detail" id="values_all/2">

    <span id="values_all/1"></span>

  <div class="detail-header">
    <a href="#values_all/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">values_all(execution, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns a map of all nodes in an execution with their current status, including unset nodes.</p><p>Unlike <a href="#values/2"><code class="inline">values/2</code></a> which only returns set nodes, this function shows all nodes including those
that haven't been set yet. Unset nodes are marked as <code class="inline">:not_set</code>, while set nodes are returned
as <code class="inline">{:set, value}</code> tuples. Useful for debugging and introspection.</p><h2 id="values_all/2-quick-example" class="section-heading"><a href="#values_all/2-quick-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Example</span></h2><pre><code class="makeup elixir" translate="no"><span class="n">all_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values_all</span><span class="p" data-group-id="1613695124-1">(</span><span class="n">execution</span><span class="p" data-group-id="1613695124-1">)</span><span class="w">
</span><span class="c1"># %{name: {:set, &quot;Alice&quot;}, age: :not_set, execution_id: {:set, &quot;EXEC...&quot;}, ...}</span></code></pre><p>Use <a href="#values/2"><code class="inline">values/2</code></a> to get only set values, or <a href="#get_value/3"><code class="inline">get_value/3</code></a> for individual node values.</p><h2 id="values_all/2-parameters" class="section-heading"><a href="#values_all/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">execution</code> - A <code class="inline">%Journey.Persistence.Schema.Execution{}</code> struct</li><li><code class="inline">opts</code> - Keyword list of options (<code class="inline">:reload</code> - defaults to <code class="inline">true</code> for fresh database state)</li></ul><h2 id="values_all/2-returns" class="section-heading"><a href="#values_all/2-returns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Returns</span></h2><ul><li>Map with all nodes showing status: <code class="inline">:not_set</code> or <code class="inline">{:set, value}</code></li><li>Includes all nodes defined in the graph, regardless of current state</li></ul><h2 id="values_all/2-examples" class="section-heading"><a href="#values_all/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Basic usage showing status progression:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">Journey.Node</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">new_graph</span><span class="p" data-group-id="8048735436-1">(</span><span class="s">&quot;example&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;v1.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8048735436-2">[</span><span class="n">input</span><span class="p" data-group-id="8048735436-3">(</span><span class="ss">:name</span><span class="p" data-group-id="8048735436-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p" data-group-id="8048735436-4">(</span><span class="ss">:age</span><span class="p" data-group-id="8048735436-4">)</span><span class="p" data-group-id="8048735436-2">]</span><span class="p" data-group-id="8048735436-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">start_execution</span><span class="p" data-group-id="8048735436-5">(</span><span class="n">graph</span><span class="p" data-group-id="8048735436-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values_all</span><span class="p" data-group-id="8048735436-6">(</span><span class="n">execution</span><span class="p" data-group-id="8048735436-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="8048735436-7">(</span><span class="p" data-group-id="8048735436-8">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="8048735436-8">]</span><span class="p" data-group-id="8048735436-7">)</span><span class="w">
</span><span class="p" data-group-id="8048735436-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8048735436-10">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p" data-group-id="8048735436-10">}</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8048735436-11">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="8048735436-11">}</span><span class="p" data-group-id="8048735436-9">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Journey</span><span class="o">.</span><span class="n">set_value</span><span class="p" data-group-id="8048735436-12">(</span><span class="n">execution</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="8048735436-12">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Journey</span><span class="o">.</span><span class="n">values_all</span><span class="p" data-group-id="8048735436-13">(</span><span class="n">execution</span><span class="p" data-group-id="8048735436-13">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">redact</span><span class="p" data-group-id="8048735436-14">(</span><span class="p" data-group-id="8048735436-15">[</span><span class="ss">:execution_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_updated_at</span><span class="p" data-group-id="8048735436-15">]</span><span class="p" data-group-id="8048735436-14">)</span><span class="w">
</span><span class="p" data-group-id="8048735436-16">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8048735436-17">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p" data-group-id="8048735436-17">}</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:not_set</span><span class="p">,</span><span class="w"> </span><span class="ss">execution_id</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8048735436-18">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;...&quot;</span><span class="p" data-group-id="8048735436-18">}</span><span class="p">,</span><span class="w"> </span><span class="ss">last_updated_at</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8048735436-19">{</span><span class="ss">:set</span><span class="p">,</span><span class="w"> </span><span class="mi">1234567890</span><span class="p" data-group-id="8048735436-19">}</span><span class="p" data-group-id="8048735436-16">}</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/journey/0.10.31" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/journey/0.10.31">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Journey.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
